<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <id>https://th815.github.io</id>
    <title>ç”°æ˜Š</title>
    <updated>2020-09-13T13:34:57.869Z</updated>
    <generator>https://github.com/jpmonette/feed</generator>
    <link rel="alternate" href="https://th815.github.io"/>
    <link rel="self" href="https://th815.github.io/atom.xml"/>
    <subtitle>è®°å½•æˆé•¿ç‚¹æ»´</subtitle>
    <logo>https://th815.github.io/images/avatar.png</logo>
    <icon>https://th815.github.io/favicon.ico</icon>
    <rights>All rights reserved 2020, ç”°æ˜Š</rights>
    <entry>
        <title type="html"><![CDATA[ä¸€ä»½ç®€æ˜çš„ Base64 åŸç†è§£æ]]></title>
        <id>https://th815.github.io/post/base64/</id>
        <link href="https://th815.github.io/post/base64/">
        </link>
        <updated>2020-09-13T13:05:40.000Z</updated>
        <content type="html"><![CDATA[<h2 id="1-base64-æ˜¯ä»€ä¹ˆ">1. Base64 æ˜¯ä»€ä¹ˆ</h2>
<blockquote>
<p>Base64 æ˜¯ä¸€ç§åŸºäº 64 ä¸ªå¯æ‰“å°å­—ç¬¦æ¥è¡¨ç¤ºäºŒè¿›åˆ¶æ•°æ®çš„è¡¨ç¤ºæ–¹æ³•ã€‚ç”±äº 2^6=64ï¼Œæ‰€ä»¥æ¯ 6 ä¸ªæ¯”ç‰¹ä¸ºä¸€ä¸ªå•å…ƒï¼Œå¯¹åº”æŸä¸ªå¯æ‰“å°å­—ç¬¦ã€‚3 ä¸ªå­—èŠ‚æœ‰ 24 ä¸ªæ¯”ç‰¹ï¼Œå¯¹åº”äº 4 ä¸ª Base64 å•å…ƒï¼Œå³ 3 ä¸ªå­—èŠ‚å¯ç”± 4 ä¸ªå¯æ‰“å°å­—ç¬¦æ¥è¡¨ç¤ºã€‚</p>
<p>â€”â€”ç»´åŸºç™¾ç§‘</p>
</blockquote>
<p>å®ƒä¸æ˜¯ä¸€ç§åŠ è§£å¯†æŠ€æœ¯ï¼Œæ˜¯ä¸€ç§ç®€å•çš„ç¼–è§£ç æŠ€æœ¯ã€‚</p>
<p>Base64 å¸¸ç”¨äºè¡¨ç¤ºã€ä¼ è¾“ã€å­˜å‚¨äºŒè¿›åˆ¶æ•°æ®ï¼Œä¹Ÿå¯ä»¥ç”¨äºå°†ä¸€äº›å«æœ‰ç‰¹æ®Šå­—ç¬¦çš„æ–‡æœ¬å†…å®¹ç¼–ç ï¼Œä»¥ä¾¿ä¼ è¾“ã€‚</p>
<p>æ¯”å¦‚ï¼š</p>
<ol>
<li>
<p>åœ¨ç”µå­é‚®ä»¶çš„ä¼ è¾“ä¸­ï¼ŒBase64 å¯ä»¥ç”¨æ¥å°† binary çš„å­—èŠ‚åºåˆ—ï¼Œæ¯”å¦‚é™„ä»¶ï¼Œç¼–ç æˆ ASCII å­—èŠ‚åºåˆ—ï¼›</p>
</li>
<li>
<p>å°†ä¸€äº›ä½“ç§¯ä¸å¤§çš„å›¾ç‰‡ Base64 ç¼–ç åï¼Œç›´æ¥å†…åµŒåˆ°ç½‘é¡µæºç é‡Œï¼›</p>
</li>
<li>
<p>å°†è¦ä¼ é€’ç»™ HTTP è¯·æ±‚çš„å‚æ•°åšç®€å•çš„è½¬æ¢ï¼Œé™ä½è‚‰çœ¼å¯è¯»æ€§ï¼›</p>
<p><em>æ³¨ï¼šç”¨äº URL çš„ Base64 éæ ‡å‡† Base64ï¼Œæ˜¯ä¸€ç§å˜ç§ã€‚</em></p>
</li>
<li>
<p>ç½‘å‹ä»¬åœ¨è®ºå›ç­‰å…¬å¼€åœºåˆä¹ æƒ¯å°†é‚®ç®±åœ°å€ Base64 åå†å‘å‡ºæ¥ï¼Œé˜²æ­¢è¢«çˆ¬è™«æŠ“å–åå‘é€åƒåœ¾é‚®ä»¶ã€‚</p>
</li>
</ol>
<h2 id="2-base64-ç¼–ç åŸç†">2. Base64 ç¼–ç åŸç†</h2>
<p>æ ‡å‡† Base64 é‡Œçš„ 64 ä¸ªå¯æ‰“å°å­—ç¬¦æ˜¯ <code>A-Za-z0-9+/</code>ï¼Œåˆ†åˆ«ä¾æ¬¡å¯¹åº”ç´¢å¼•å€¼ 0-63ã€‚ç´¢å¼•è¡¨å¦‚ä¸‹ï¼š</p>
<figure data-type="image" tabindex="1"><img src="/images/posts/java/base64-index.png" alt="" loading="lazy"></figure>
<p>ç¼–ç æ—¶ï¼Œæ¯ 3 ä¸ªå­—èŠ‚ä¸€ç»„ï¼Œå…± 8bit*3=24bitï¼Œåˆ’åˆ†æˆ 4 ç»„ï¼Œå³æ¯ 6bit ä»£è¡¨ä¸€ä¸ªç¼–ç åçš„ç´¢å¼•å€¼ï¼Œåˆ’åˆ†å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<figure data-type="image" tabindex="2"><img src="/images/posts/java/base64-split.png" alt="" loading="lazy"></figure>
<p>è¿™æ ·å¯èƒ½ä¸å¤ªç›´è§‚ï¼Œä¸¾ä¸ªä¾‹å­å°±å®¹æ˜“ç†è§£äº†ã€‚æ¯”å¦‚æˆ‘ä»¬å¯¹ <code>cat</code> è¿›è¡Œç¼–ç ï¼š</p>
<figure data-type="image" tabindex="3"><img src="/images/posts/java/base64-example.jpeg" alt="" loading="lazy"></figure>
<p>å¯ä»¥çœ‹åˆ° <code>cat</code> ç¼–ç åå˜æˆäº† <code>Y2F0</code>ã€‚</p>
<p>å¦‚æœå¾…ç¼–ç å†…å®¹çš„å­—èŠ‚æ•°ä¸æ˜¯ 3 çš„æ•´æ•°å€ï¼Œé‚£éœ€è¦è¿›è¡Œä¸€äº›é¢å¤–çš„å¤„ç†ã€‚</p>
<p>å¦‚æœæœ€åå‰©ä¸‹ 1 ä¸ªå­—èŠ‚ï¼Œé‚£ä¹ˆå°†è¡¥ 4 ä¸ª 0 ä½ï¼Œç¼–ç æˆ 2 ä¸ª Base64 å­—ç¬¦ï¼Œç„¶åè¡¥ä¸¤ä¸ª <code>=</code>ï¼š</p>
<figure data-type="image" tabindex="4"><img src="/images/posts/java/base64-padding2.png" alt="" loading="lazy"></figure>
<p>å¦‚æœæœ€åå‰©ä¸‹ 2 ä¸ªå­—èŠ‚ï¼Œé‚£ä¹ˆå°†è¡¥ 2 ä¸ª 0 ä½ï¼Œç¼–ç æˆ 3 ä¸ª Base64 å­—ç¬¦ï¼Œç„¶åè¡¥ä¸€ä¸ª <code>=</code>ï¼š</p>
<figure data-type="image" tabindex="5"><img src="/images/posts/java/base64-padding1.png" alt="" loading="lazy"></figure>
<h2 id="3-å®ç°ä¸€ä¸ªç®€æ˜“çš„-base64-ç¼–ç å™¨">3. å®ç°ä¸€ä¸ªç®€æ˜“çš„ Base64 ç¼–ç å™¨</h2>
<p>è®²å®ŒåŸç†ï¼Œæˆ‘ä»¬å°±å¯ä»¥åŠ¨æ‰‹å®ç°ä¸€ä¸ªç®€æ˜“çš„æ ‡å‡† Base64 ç¼–ç å™¨äº†ï¼Œä»¥ä¸‹æ˜¯æˆ‘å‚è€ƒ Java 8 çš„ java.util.Base64 ä¹±å†™çš„ä¸€ä¸ª Java ç‰ˆæœ¬ï¼Œä»…ä¾›å‚è€ƒï¼Œä¸»è¦åŠŸèƒ½ä»£ç å¦‚ä¸‹ï¼š</p>
<pre><code class="language-java">public class CustomBase64Encoder {

    /**
     * ç´¢å¼•è¡¨
     */
    private static final char[] sBase64 = {
            'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H',
            'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P',
            'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X',
            'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f',
            'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n',
            'o', 'p', 'q', 'r', 's', 't', 'u', 'v',
            'w', 'x', 'y', 'z', '0', '1', '2', '3',
            '4', '5', '6', '7', '8', '9', '+', '/'
    };

    /**
     * å°† byte[] è¿›è¡Œ Base64 ç¼–ç å¹¶è¿”å›å­—ç¬¦ä¸²
     * @param src åŸæ–‡
     * @return ç¼–ç åçš„å­—ç¬¦ä¸²
     */
    public static String encode(byte[] src) {
        if (src == null) {
            return null;
        }

        byte[] dst = new byte[(src.length + 2) / 3 * 4];

        int index = 0;

        // æ¯æ¬¡å°† 3 ä¸ªå­—èŠ‚ç¼–ç ä¸º 4 ä¸ªå­—èŠ‚
        for (int i = 0; i &lt; (src.length / 3 * 3); i += 3) {
            int bits = (src[i] &amp; 0xff) &lt;&lt; 16 | (src[i + 1] &amp; 0xff) &lt;&lt; 8 | (src[i + 2] &amp; 0xff);
            dst[index++] = (byte) sBase64[(bits &gt;&gt;&gt; 18) &amp; 0x3f];
            dst[index++] = (byte) sBase64[(bits &gt;&gt;&gt; 12) &amp; 0x3f];
            dst[index++] = (byte) sBase64[(bits &gt;&gt;&gt; 6) &amp; 0x3f];
            dst[index++] = (byte) sBase64[bits &amp; 0x3f];
        }

        // å¤„ç†å‰©ä¸‹çš„ 1 ä¸ªæˆ– 2 ä¸ªå­—èŠ‚
        if (src.length % 3 == 1) {
            int bits = (src[src.length - 1] &amp; 0xff) &lt;&lt; 4;
            dst[index++] = (byte) sBase64[(bits &gt;&gt;&gt; 6) &amp; 0x3f];
            dst[index++] = (byte) sBase64[bits &amp; 0x3f];
            dst[index++] = '=';
            dst[index] = '=';
        } else if (src.length % 3 == 2) {
            int bits = (src[src.length - 2] &amp; 0xff) &lt;&lt; 10 | (src[src.length - 1] &amp; 0xff) &lt;&lt; 2;
            dst[index++] = (byte) sBase64[(bits &gt;&gt;&gt; 12) &amp; 0x3f];
            dst[index++] = (byte) sBase64[(bits &gt;&gt;&gt; 6) &amp; 0x3f];
            dst[index++] = (byte) sBase64[bits &amp; 0x3f];
            dst[index] = '=';
        }

        return new String(dst);
    }
}
</code></pre>
<h2 id="4-å…¶å®ƒçŸ¥è¯†ç‚¹">4. å…¶å®ƒçŸ¥è¯†ç‚¹</h2>
<h3 id="41-ä¸ºä»€ä¹ˆæœ‰çš„ç¼–ç ç»“æœå¸¦å›è½¦">4.1 ä¸ºä»€ä¹ˆæœ‰çš„ç¼–ç ç»“æœå¸¦å›è½¦</h3>
<p>åœ¨ç”µå­é‚®ä»¶ä¸­ï¼Œæ ¹æ® RFC 822 è§„å®šï¼Œæ¯ 76 ä¸ªå­—ç¬¦éœ€è¦åŠ ä¸Šä¸€ä¸ªå›è½¦æ¢è¡Œï¼Œæ‰€ä»¥æœ‰äº›ç¼–ç å™¨å®ç°ï¼Œæ¯”å¦‚ sun.misc.BASE64Encoder.encodeï¼Œæ˜¯å¸¦å›è½¦çš„ï¼Œè¿˜æœ‰ java.util.Base64.Encoder.RFC2045ï¼Œæ˜¯å¸¦å›è½¦æ¢è¡Œçš„ï¼Œæ¯è¡Œ 76 ä¸ªå­—ç¬¦ã€‚</p>
<h3 id="42-base64-çš„å˜ç§">4.2 Base64 çš„å˜ç§</h3>
<p>é™¤äº†æ ‡å‡† Base64 ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›å…¶å®ƒçš„ Base64 å˜ç§ã€‚</p>
<p>æ¯”å¦‚åœ¨ URL çš„åº”ç”¨åœºæ™¯ä¸­ï¼Œå› ä¸ºæ ‡å‡† Base64 ç´¢å¼•è¡¨ä¸­çš„ <code>/</code> å’Œ <code>+</code> ä¼šè¢« URLEncoder è½¬ä¹‰æˆ <code>%XX</code> å½¢å¼ï¼Œä½† <code>%</code> æ˜¯ SQL ä¸­çš„é€šé…ç¬¦ï¼Œç›´æ¥ç”¨äºæ•°æ®åº“æ“ä½œä¼šæœ‰é—®é¢˜ã€‚æ­¤æ—¶å¯ä»¥é‡‡ç”¨ URL Safe çš„ç¼–ç å™¨ï¼Œç´¢å¼•è¡¨ä¸­çš„ <code>/+</code> è¢«æ¢æˆ <code>-_</code>ï¼Œæ¯”å¦‚ java.util.Base64.Encoder.RFC4648_URLSAFE å°±æ˜¯è¿™æ ·çš„å®ç°ã€‚</p>
<h2 id="5-å‚è€ƒé“¾æ¥">5. å‚è€ƒé“¾æ¥</h2>
<ul>
<li><a href="https://zh.wikipedia.org/zh-hans/Base64">https://zh.wikipedia.org/zh-hans/Base64</a></li>
<li><a href="https://www.liaoxuefeng.com/wiki/897692888725344/949441536192576">https://www.liaoxuefeng.com/wiki/897692888725344/949441536192576</a></li>
</ul>
]]></content>
    </entry>
    <entry>
        <title type="html"><![CDATA[âŒšï¸æ–‡å­—å›¾ç‰‡æµ‹è¯•]]></title>
        <id>https://th815.github.io/post/2020-09-12/</id>
        <link href="https://th815.github.io/post/2020-09-12/">
        </link>
        <updated>2020-09-12T08:09:15.000Z</updated>
        <summary type="html"><![CDATA[<h1 id="æ–‡å­—æµ‹è¯•">æ–‡å­—æµ‹è¯•</h1>
<blockquote>
<p>2020<br>
ğŸ’¡test</p>
</blockquote>
<h1 id="å›¾ç‰‡æµ‹è¯•">å›¾ç‰‡æµ‹è¯•</h1>
<p><img src="https://th815.github.io/post-images/1599902337333.jpg" alt="" loading="lazy"><br>
è¿™é‡Œåº”è¯¥æ˜¯ä¸€å¼ å›¾ç‰‡</p>
<ul>
<li>1æ˜Ÿå·</li>
<li>**   åŒâ€œæ˜Ÿå·â€æµ‹è¯•</li>
</ul>
]]></summary>
        <content type="html"><![CDATA[<h1 id="æ–‡å­—æµ‹è¯•">æ–‡å­—æµ‹è¯•</h1>
<blockquote>
<p>2020<br>
ğŸ’¡test</p>
</blockquote>
<h1 id="å›¾ç‰‡æµ‹è¯•">å›¾ç‰‡æµ‹è¯•</h1>
<p><img src="https://th815.github.io/post-images/1599902337333.jpg" alt="" loading="lazy"><br>
è¿™é‡Œåº”è¯¥æ˜¯ä¸€å¼ å›¾ç‰‡</p>
<ul>
<li>1æ˜Ÿå·</li>
<li>**   åŒâ€œæ˜Ÿå·â€æµ‹è¯•</li>
</ul>
<!-- more -->
<p>åˆ†éš”ç¬¦</p>
<pre><code>class MyClass {
  public static myValue: string;
  constructor(init: string) {
    this.myValue = init;
  }
}
import fs = require(&quot;fs&quot;);
module MyModule {
  export interface MyInterface extends Other {
    myProperty: any;
  }
}
declare magicNumber number;
myArray.forEach(() =&gt; { }); // fat arrow syntax`

</code></pre>
<h1 id="ä»£ç é«˜äº®">ä»£ç é«˜äº®</h1>
<pre><code>`class MyClass {
  public static myValue: string;
  constructor(init: string) {
    this.myValue = init;
  }
}
import fs = require(&quot;fs&quot;);
module MyModule {
  export interface MyInterface extends Other {
    myProperty: any;
  }
}
declare magicNumber number;
myArray.forEach(() =&gt; { }); // fat arrow syntax`
</code></pre>
<h1 id="å±…ä¸­">å±…ä¸­</h1>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">é’±</mi><mi mathvariant="normal">ğŸ’°</mi></mrow><annotation encoding="application/x-tex">é’±ğŸ’° 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0em;vertical-align:0em;"></span><span class="mord cjk_fallback">é’±</span><span class="mord">ğŸ’°</span></span></span></span></span></p>
<p class='katex-block'><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">æµ‹</mi><mi mathvariant="normal">è¯•</mi></mrow><annotation encoding="application/x-tex">æµ‹è¯• 
</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0em;vertical-align:0em;"></span><span class="mord cjk_fallback">æµ‹</span><span class="mord cjk_fallback">è¯•</span></span></span></span></span></p>
<h1 id="åˆ—è¡¨æµ‹è¯•">åˆ—è¡¨æµ‹è¯•</h1>
<ul>
<li>åˆ—è¡¨</li>
<li>æµ‹è¯•1</li>
<li>ver</li>
</ul>
]]></content>
    </entry>
</feed>